//// Script #3
//// script to update key within a json file

package main

import (
	"encoding/json"
	"fmt"
	"os"
)

type Verse struct {
	VerseCount    string            `json:"verse_count"`
	BookNumber    string            `json:"book_number"`
	ChapterNumber string            `json:"chapter_number"`
	BookName      map[string]string `json:"book_name"`
	Verse         map[string]string `json:"verse"`
	VerseNumber   int               `json:"verse_number"`
}

func main() {
	// Open the JSON file
	file, err := os.Open("book_03__leviticus.json")
	if err != nil {
		fmt.Println(err)
		return
	}
	defer file.Close()

	// Parse the JSON data
	var verses []Verse
	err = json.NewDecoder(file).Decode(&verses)
	if err != nil {
		fmt.Println(err)
		return
	}

	// update the value of the "hindi" key in the "book_name" field for each verse
	for i := range verses {
		verses[i].BookName["hindi"] = "लैव्यवस्था"
	}

	// Write the updated JSON data back to the file
	file, err = os.Create("book_03__leviticus.json")
	if err != nil {
		fmt.Println(err)
		return
	}
	defer file.Close()

	encoder := json.NewEncoder(file)
	encoder.SetIndent("", "  ")
	err = encoder.Encode(verses)
	if err != nil {
		fmt.Println(err)
		return
	}
}
